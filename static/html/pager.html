{{define "pager"}}
{{$selected := .ctx.Browse.Selected}}
{{$neighbour := .ctx.Browse.Next}}
{{$resultName := .ctx.Browse.ResultName}}
{{$fileName := .curFile.Name}}
{{$sliced := slice .files $selected}}
{{$adjustment := adjustment .files $selected}}
<ul id="filepager" class="pagination pagination-right">
  {{$prev := sum $selected -1}}
  <li>
    <a href="displayresult?filename={{$fileName}}&current={{$prev}}&next={{$selected}}&resultname={{$resultName}}">
      &laquo;
    </a>
  </li>
  {{range $index, $file := $sliced}}
  {{$actual := sum $index $adjustment}}
  {{$actualNext := sum $actual 1}}
  {{if (equal $actual $selected)}} 
  <li class="active">
    <a id="file{{$actual}}"
       href="displayresult?filename={{$fileName}}&current={{$actual}}&next={{$actualNext}}&resultname={{$resultName}}">
      {{$actualNext}}
    </a>
  </li>
  {{else}}
  <li>
    <a id="file{{$actual}}"
       href="displayresult?filename={{$fileName}}&current={{$actual}}&next={{$actualNext}}&resultname={{$resultName}}">
      {{$actualNext}}
    </a>
  </li>
  {{end}}
  {{end}}
  {{$next := sum $neighbour 1}}
  <li>
    <a href="displayresult?filename={{$fileName}}&current={{$neighbour}}&next={{$next}}&resultname={{$resultName}}">
      &raquo;
    </a>
  </li>
</ul>
{{end}}
