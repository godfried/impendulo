{{define "view"}}
{{$curFile := .curFile}}
{{$selected := .selected}}
{{$nextIndex := sum $selected 1}}
{{$results := .results}}
<ul class="breadcrumb">
  <li><a href="homeview">Home</a><span class="divider">/</span></li>
  {{if .ctx.Browse.IsUser}}
  <li><a href="getusers">Users</a><span class="divider"></span></li>
  <li><a href="getsubmissions?id={{.ctx.Browse.Uid}}&type=user">Submissions</a><span class="divider"></span></li>
  {{else}}
  <li><a href="getprojects">Projects</a><span class="divider"></span></li>
  <li><a href="getsubmissions?id={{.ctx.Browse.Pid}}&type=project">Submissions</a><span class="divider"></span></li>
  {{end}}
  <li><a href="getfiles?subid={{.ctx.Browse.Sid}}">Files</a><span class="divider"></span></li>
  <li class="active">Result List</li>
</ul>
<h3>{{ .curFile.Name}}</h3>
<div id="filePager" files="{{len .files}}" selected="{{$selected}}" class="pagination pagination-centered pagination-large">
  {{range $index, $file := .files}}
  <a id="file{{$index}}" href="getresultlist?filename={{$file.Name}}&currentIndex={{$index}}"></a>
  {{end}}
</div>
<ul class="unstyled">
  {{range $results}}
  <li><a href="displayresult?filename={{$curFile.Name}}&currentIndex={{$selected}}&nextIndex={{$nextIndex}}&resultname={{.}}">
      <h4>{{.}}</h4>
  </a></li>
  {{end}}
</ul>
{{end}}
