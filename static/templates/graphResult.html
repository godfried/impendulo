{{define "view"}}
{{$resultName := .ctx.Browse.Result}}
{{$fileName := .fileName}}
{{$results := .results}}
{{$type := .type}}
<ul class="breadcrumb">
  <li><a href="homeview">Home</a></li>
  {{if .ctx.Browse.IsUser}}
  <li><a href="userresult">Users</a></li>
  <li class="dropdown">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
      User Submissions <span class="caret"></span>
    </a>
    <ul class="dropdown-menu" role="menu">
      {{range .ctx.Users}}
      <li><a href="getsubmissions?id={{.Name}}&type=user">{{.Name}}</a></li>
      {{end}}
    </ul>
  </li>
  <li><a href="getfiles?subid={{.ctx.Browse.Sid}}">{{projectName .ctx.Browse.Pid}} Submission</a></li>
  {{else}}
  <li><a href="projectresult">Projects</a></li>
  <li class="dropdown">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
      Project Submissions <span class="caret"></span>
    </a>
    <ul class="dropdown-menu" role="menu">
      {{range .ctx.Projects}}
      <li><a href="getsubmissions?id={{.Id.Hex}}&type=project">{{.Name}}</a></li>
      {{end}}
    </ul>
  </li>
  <li><a href="getfiles?subid={{.ctx.Browse.Sid}}">{{.ctx.Browse.Uid}}'s Submission</a></li>
  {{end}}
  <li class="dropdown">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
      {{$resultName}} Graph <span class="caret"></span>
    </a>
    <ul class="dropdown-menu" role="menu">
      {{range $results}}  
      <li>
	<a href="displaygraph?filename={{$fileName}}&resultname={{.}}&type=$type">
	  {{.}}
	</a>
      </li>
      {{end}}
    </ul>
  </li>
</ul>
<h2 class="text-center">
  <small>user</small> {{.ctx.Browse.Uid}} 
  <small>project</small> {{projectName .ctx.Browse.Pid}}
  <small>file</small> {{ $fileName}} 
  <small>tool</small> {{$resultName}}
</h2>
<div>
<form role="form" class="center" action="displaygraph" method="get">
  <label for="timeRadio" class="radio-inline">
      <input type="radio" name="type" id="timeRadio" value="time" 
	     {{if equal "time" $type}} checked{{end}}>
      Time
    </label>
  <label for="numRadio" class="radio-inline">
    <input type="radio" name="type" id="numRadio" value="num"
	   {{if equal "num" $type}} checked{{end}}>
      Normal
  </label>
  <input type="hidden" name="filename" value="{{$fileName}}"/>
  <input type="hidden" name="resultname" value="{{$resultName}}"/>
  <button type="submit" class="btn btn-default">
    <span class="glyphicon glyphicon-arrow-right"></span>
  </button>
</form>
</div>
<div>
<br>
</div>
<script language="javascript" src="/static/js/jquery-2.0.2.min.js"></script>
<script language="javascript" src="/static/js/d3.v3.min.js"></script>
<script language="javascript" src="/static/js/rickshaw.js"></script>
<script language="javascript" src="/static/js/graphs.js"></script> 
<div class="chart_holder" id="resultGraphHolder">
  <div class="y_axis" id="resultGraphY"></div>
  <div class="chart" id="resultGraph"></div>
  <div class="legend" id="resultGraphLegend"></div>
  <div class="x_axis" id="resultGraphX"></div> 
</div>
<script>
  drawGraph({{.graphArgs}});
</script>
{{end}}
