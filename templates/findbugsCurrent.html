{{ define "currentResult" }}
{{$id := .Id.Hex}}
<div class="accordion" id="fbaccordion{{$id}}">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#fbaccordion{{$id}}" href="#Summary{{$id}}">Summary</a>
    </div>
    <div id="Summary{{$id}}" class="accordion-body collapse">
      <div class="accordion-inner">
	<div class="accordion" id="fbsummaryaccordion{{$id}}">
	  <div class="accordion-group">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" data-parent="#fbsummaryaccordion{{$id}}" href="#Overview{{$id}}">Overview</a>
	    </div>
	    <div id="Overview{{$id}}" class="accordion-body collapse">
	      <div class="accordion-inner">
		<dl class="dl-horizontal">
		  <dt>Execution Date</dt><dd>{{date .Time}}</dd>
		  <dt>Classes Analyzed</dt><dd>{{.Summary.ClassCount}}</dd>
		  <dt>Packages Analyzed</dt><dd>{{.Summary.PackageCount}}</dd>
		  <dt>Classes Referenced</dt><dd>{{.Summary.ReferenceCount}}</dd>
		  <dt>Total Bugs Found</dt><dd>{{.Summary.BugCount}}</dd>
		  <dt>Priority 1 Bugs Found</dt><dd>{{.Summary.Priority1}}</dd>
		  <dt>Priority 2 Bugs Found</dt><dd>{{.Summary.Priority2}}</dd>
		  <dt>Priority 3 Bugs Found</dt><dd>{{.Summary.Priority3}}</dd>
		</dl>
	      </div>
	    </div>
	  </div>
	  <div class="accordion-group">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" data-parent="#fbsummaryaccordion{{$id}}" href="#Files{{$id}}">Files</a>
	    </div>
	    <div id="Files{{$id}}" class="accordion-body collapse">
	      <div class="accordion-inner">
		{{range .Summary.Files}}
		<dl class="dl-horizontal">
		  <dt>Path</dt><dd>{{.Path}}</dd>
		  <dt>Bugs Found</dt><dd>{{.BugCount}}</dd>
		</dl>
		{{end}}
	      </div>
	    </div>
	  </div>
	  <div class="accordion-group">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" data-parent="#fbsummaryaccordion{{$id}}" href="#Packages{{$id}}">Packages</a>
	    </div>
	    <div id="Packages{{$id}}" class="accordion-body collapse">
	      <div class="accordion-inner">
		<div class="accordion" id="fbpkgaccordion{{$id}}">
		  {{range .Summary.Packages}}
		  {{$address := address .}} 
		  <div class="accordion-group">
		    <div class="accordion-heading">
		      <a class="accordion-toggle" data-toggle="collapse" data-parent="#fbpkgaccordion{{$id}}" href="#Package{{$address}}{{$id}}">Name: {{.Name}}</a>
		    </div>
		    <div id="Package{{$address}}{{$id}}" class="accordion-body collapse">
		      <div class="accordion-inner">
			<dl class="dl-horizontal">
			  <dt>Number of Classes</dt><dd>{{.ClassCount}}</dd>
			  <dt>Bugs Found</dt><dd>{{.BugCount}}</dd>
			  <dt>Priority 1 Bugs Found</dt><dd>{{.Priority1}}</dd>
			  <dt>Priority 2 Bugs Found</dt><dd>{{.Priority2}}</dd>
			  <dt>Priority 3 Bugs Found</dt><dd>{{.Priority3}}</dd>
			  <div class="accordion" id="fbclassaccordion{{$id}}">
			    {{range .Classes}}
			    {{$address := address .}} 
			    <div class="accordion-group">
			      <div class="accordion-heading">
				<a class="accordion-toggle" data-toggle="collapse" data-parent="#fbclassaccordion{{$id}}" href="#Class{{$address}}{{$id}}">{{.Name}}</a>
			      </div>
			      <div id="Class{{$address}}{{$id}}" class="accordion-body collapse">
				<div class="accordion-inner">
			  	  <dl class="dl-horizontal">
				    <dt>Source File</dt><dd>{{.Source}}</dd>
				    <dt>Interface</dt><dd>{{.IsInterface}}</dd>
				    <dt>Bugs Found</dt><dd>{{.BugCount}}</dd>
				    <dt>Priority 1 Bugs Found</dt><dd>{{.Priority1}}</dd>
				    <dt>Priority 2 Bugs Found</dt><dd>{{.Priority2}}</dd>
				    <dt>Priority 3 Bugs Found</dt><dd>{{.Priority3}}</dd>
				  </dl>
				</div>
			      </div>
			    </div>
			    {{end}}
			  </div>
			</dl>
		      </div>
		    </div>
		  </div>
		  {{end}}
		</div>
	      </div>
	    </div>
	  </div>
	</div>
      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#fbaccordion{{$id}}" href="#Bugs{{$id}}">Bugs</a>
    </div>
    <div id="Bugs{{$id}}" class="accordion-body collapse">
      <div class="accordion-inner">
	<div class="accordion" id="fbbugsaccordion{{$id}}">
	  {{$patterns := .PatternMap}}
	  {{$categories := .CategoryMap}}
	  {{range .Instances}}
	  {{$pattern := index $patterns .Type}}
	  {{$category := index $categories .Category}}
	  <div class="accordion-group">
	    {{$address := address .}} 
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" data-parent="#fbbugsaccordion{{$id}}" href="#Bug{{$address}}{{$id}}">{{$pattern.Description}}</a>
	    </div>
	    <div id="Bug{{$address}}{{$id}}" class="accordion-body collapse">
	      <div class="accordion-inner">
		 <dl class="dl-horizontal">
		   <dt>Priority</dt><dd>{{.Priority}}</dd>
		   <dt>Category</dt><dd>{{$category.Description}}</dd>
		   <dt>Rank</dt><dd>{{.Rank}}</dd>
		   <dt>Description</dt><dd>{{.LongMessage}}</dd>
		   <dt>Source Line</dt><dd>{{.Line.Message}}</dd>
		 </dl>
	      </div>
	    </div>
	  </div>
	  {{end}}
	</div>
      </div>
    </div>
  </div>
</div>
{{end}}
